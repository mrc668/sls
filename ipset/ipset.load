#!/bin/bash

LOGGER="/usr/bin/logger -p daemon.info -t $0"
$LOGGER called with $*

sets="$*"
[ "$sets" ] || sets=$( ls /etc/sysconfig/ipsets )

for s in $sets; do
  $LOGGER creating $s
  /sbin/ipset create $s hash:net 2>/dev/null
  /sbin/ipset flush $s
  cat /etc/sysconfig/ipsets/$s | while read ip comment; do 
    /sbin/ipset add $s $ip
  done
done


